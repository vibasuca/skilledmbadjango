{% extends "base.html" %}
{% load static %}
{% block title %}Skilled MBA{% endblock title %}

{% block content %}
<style>
    .backdrop{
        background-color: rgba(0, 0, 0, 0.5);
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: none;
    }

    @media (max-width: 992px) {
        .sidebar {
            position: fixed;
            top: 0px;
            left: -400px;
            z-index: 1;
            height: 100%;
        }
    }

    @media (min-width: 992px) {
        .sidebar {
            position: static;
            top: 0px;
            left: 0px;
        }
    }
</style>
<!--main content-->
<div class="container-fluid bg-white">
    <div class="container py-4">
        <!--page title-->
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a href="#" class="hover-underline-animation">Home</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="#" class="hover-underline-animation">Courses</a>
                </li>
                <li class="breadcrumb-item">Art & Design</li>
            </ol>
        </nav>
    </div>

    <div>
        <div class="d-flex">
            <div class="sidebar bg-danger" style="width: 400px;">
                sidebar
            </div>
            <div class="content bg-success flex-fill">
                <button class="toggleSidebar">
                    T
                </button>
            </div>
        </div>
        <div class="backdrop"></div>
    </div>
</div>


{% if not user.is_authenticated %}
<div class="position-fixed bottom-0 login-cta p-4" style="right: 0px; z-index: 2;">
    <div class="card border-0 shadow-sm pb-5" style="height: 100%; width: 470px; max-width: 100%;">
        <!--TODO: Responsive done -->
        <div class="card-body d-flex flex-column align-items-center gap-3">
            <div class="py-4">
                <h4>Login & try Skilledmba</h4>
                without sign up any accounts
            </div>
            <div style="width: 80%;">
                <div class="d-grid gap-2">
                    <a href="{% url 'account_signup' %}" class="btn btn-primary py-3" type="button"
                        style="background: #0071dc;">
                        <b>Login as Student</b>
                    </a>
                </div>
            </div>
            <div style="width: 80%;">
                <div class="d-grid gap-2">
                    <a href="{% url 'users:instructor_signup' %}" class="btn py-3" type="button"
                        style="background: #ffc221;">
                        <b>Login as Instructor</b>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div id="close-login-cta"
        class="position-absolute translate-middle rounded-circle border p-3 d-flex justify-content-center align-items-center shadow"
        style="top: 25px; right: -5px; background: #fff; width: 10px; height: 10px; cursor: pointer;">
        <i class="far fa-times"></i>
    </div>
</div>
{% endif %}

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>

    const windowWidth = $(window).width();

    if(windowWidth < 992){
        $(".toggleSidebar").click(function(){
            activate();
        });
        $(".backdrop").click(function(){
            deactivate();
        });
        function activate() {
            $(".sidebar").css("left", "0px");
            $(".backdrop").show();
        }
        function deactivate() {
            $(".sidebar").css("left", "-400px");
            $(".backdrop").hide();
        }
    }
    
    if(windowWidth > 992) {
        $(".toggleSidebar").click(function(){
            $(".sidebar").toggle();
        });
    }

    if (document.querySelector('.trigger') != null) {
        (new IntersectionObserver(function (e, o) {
            if (e[0].intersectionRatio > 0) {
                $("#courseSidePanelJS").removeClass("sticky-top").addClass("position-relative");
                $("#courseSidePanelJS").css("top", "-275px");
            } else {
                $("#courseSidePanelJS").removeClass("position-relative").addClass("sticky-top");
                $("#courseSidePanelJS").css("top", "175px");
            };

        })).observe(document.querySelector('.trigger'));
    }

    document.addEventListener("DOMContentLoaded", function () {
        var animateElements = document.querySelectorAll(".animate-me");

        function checkAnimation() {
            animateElements.forEach(function (element) {
                var elementPosition = element.getBoundingClientRect().top;
                var windowHeight = window.innerHeight;

                if (elementPosition < windowHeight - 100) { // Adjust threshold as needed
                    element.classList.add("animate");
                }
            });
        }

        window.addEventListener("scroll", checkAnimation);
        checkAnimation(); // Check on page load
    });

    $(document).ready(function () {
        $("#close-login-cta").click(function () {
            $(".login-cta").hide();
        });
    });

    $(".section").click(function () {
        $(this).children(".fas").toggleClass("fa-plus fa-minus");
    });
</script>
{% endblock content %}