!function(n){"use strict";function l(e,a){this.ACTIVE_CLASS="open",this.init=function(){var a=this;e.on("click",".popup-overlay, .button-close-popup",function(e){e.preventDefault(),e.stopPropagation(),a.close()})},this.open=function(){n(".edumall-popup").EdumallPopup("close"),e.addClass(this.ACTIVE_CLASS)},this.close=function(){e.removeClass(this.ACTIVE_CLASS)}}n.fn.EdumallPopup=function(e){var a,t,s,o="string"==typeof e?e:void 0;return o?(a=[],this.each(function(){var e=n(this).data("EdumallPopup");a.push(e)}),t=1<arguments.length?Array.prototype.slice.call(arguments,1):void 0,s=[],this.each(function(e){var e=a[e];e?"function"==typeof e[o]?(e=e[o].apply(e,t),s.push(e)):console.warn("Method '"+o+"' not defined in $.EdumallPopup"):(console.warn("$.EdumallPopup not instantiated yet"),console.info(this),s.push(void 0))}),1<s.length?s:s[0]):this.each(function(){var e=n(this),a=new l(e);e.data("EdumallPopup",a),a.init()})}}(jQuery),function(r){"use strict";r(document).ready(function(){var e=$edumallLogin.validatorMessages,t=(jQuery.extend(jQuery.validator.messages,{required:e.required,remote:e.remote,email:e.email,url:e.url,date:e.date,dateISO:e.dateISO,number:e.number,digits:e.digits,creditcard:e.creditcard,equalTo:e.equalTo,accept:e.accept,maxlength:jQuery.validator.format(e.maxlength),minlength:jQuery.validator.format(e.minlength),rangelength:jQuery.validator.format(e.rangelength),range:jQuery.validator.format(e.range),max:jQuery.validator.format(e.max),min:jQuery.validator.format(e.min)}),edumall.Helpers),e=r("body"),s=r("#popup-pre-loader"),a=r("#popup-user-login"),o=r("#popup-user-register"),n=r("#popup-user-lost-password");function l(){a.hasClass("popup-loaded")?a.EdumallPopup("open"):r.ajax({url:t.getAjaxUrl("lazy_load_template"),type:"GET",cache:!1,dataType:"html",data:{template:a.data("template")},success:function(e){a.find(".popup-content-inner").html(e),a.addClass("popup-loaded"),a.EdumallPopup("open"),a.find(".mo-openid-app-icons .mo_btn-social").removeAttr("style"),a.find(".mo-openid-app-icons .mo_btn-social .mofa").removeAttr("style"),a.find(".mo-openid-app-icons .mo_btn-social svg").removeAttr("style"),a.find("#edumall-login-form").validate({rules:{user_login:{required:!0},password:{required:!0}},submitHandler:function(e){var a=r(e),e=a.find('button[type="submit"]');if(!0===e.attr("disabled"))return!1;e.attr("disabled",!0),r.ajax({url:$edumall.ajaxurl,type:"POST",cache:!1,dataType:"json",data:a.serialize(),success:function(e){e.success?(a.find(".form-response-messages").html(e.messages).addClass("success").show(),""!==e.redirect_url?window.location.href=e.redirect_url:location.reload()):a.find(".form-response-messages").html(e.messages).addClass("error").show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon").attr("disabled",!1)}})}})},error:function(e,a,t){console.log(t)},beforeSend:function(){r(".edumall-popup").EdumallPopup("close"),s.addClass("open")},complete:function(){s.removeClass("open")}})}r(".edumall-popup").EdumallPopup(),e.hasClass("required-login")&&!e.hasClass("logged-in")&&l(),e.on("click",".open-popup-login",function(e){e.preventDefault(),e.stopPropagation(),l()}),e.on("click",".open-popup-register",function(e){e.preventDefault(),e.stopPropagation(),o.hasClass("popup-loaded")?o.EdumallPopup("open"):r.ajax({url:t.getAjaxUrl("lazy_load_template"),type:"GET",cache:!1,dataType:"html",data:{template:o.data("template")},success:function(e){o.find(".popup-content-inner").html(e),o.addClass("popup-loaded"),o.EdumallPopup("open"),o.find("#edumall-register-form").validate({rules:{firstname:{required:!0},lastname:{required:!0},username:{required:!0,minlength:4},email:{required:!0,email:!0},password:{required:!0,minlength:8,maxlength:30},password2:{required:!0,minlength:8,maxlength:30,equalTo:"#ip_reg_password"}},submitHandler:function(e){var a=r(e),e=a.find('button[type="submit"]');if(!0===e.attr("disabled"))return!1;e.attr("disabled",!0),r.ajax({url:$edumall.ajaxurl,type:"POST",cache:!1,dataType:"json",data:a.serialize(),success:function(e){e.success?(a.find(".form-response-messages").html(e.messages).addClass("success").show(),location.reload()):a.find(".form-response-messages").html(e.messages).addClass("error").show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon").attr("disabled",!1)}})}})},error:function(e,a,t){console.log(t)},beforeSend:function(){r(".edumall-popup").EdumallPopup("close"),s.addClass("open")},complete:function(){s.removeClass("open")}})}),e.on("click",".open-popup-lost-password",function(e){e.preventDefault(),e.stopPropagation(),n.hasClass("popup-loaded")?n.EdumallPopup("open"):r.ajax({url:t.getAjaxUrl("lazy_load_template"),type:"GET",cache:!1,dataType:"html",data:{template:n.data("template")},success:function(e){n.find(".popup-content-inner").html(e),n.addClass("popup-loaded"),n.EdumallPopup("open"),n.find("#edumall-lost-password-form").on("submit",function(e){e.preventDefault();var a=r(this),e=a.find('button[type="submit"]');if(!0===e.attr("disabled"))return!1;e.attr("disabled",!0),r.ajax({type:"post",url:$edumall.ajaxurl,dataType:"json",data:a.serialize(),success:function(e){(e.success?a.find(".form-response-messages").html(e.messages).addClass("success"):a.find(".form-response-messages").html(e.messages).addClass("error")).show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon").attr("disabled",!1)}})})},error:function(e,a,t){console.log(t)},beforeSend:function(){r(".edumall-popup").EdumallPopup("close"),s.addClass("open")},complete:function(){s.removeClass("open")}})}),e.on("click",".open-popup-instructor-register",function(e){var a;e.preventDefault(),e.stopPropagation(),(a=r("#edumall-popup-instructor-register")).hasClass("popup-loaded")?a.EdumallPopup("open"):r.ajax({url:t.getAjaxUrl("lazy_load_template"),type:"GET",cache:!1,dataType:"html",data:{template:a.data("template")},success:function(e){a.find(".popup-content-inner").html(e),a.addClass("popup-loaded"),a.EdumallPopup("open"),a.find("form").validate({rules:{fullname:{required:!0},username:{required:!0},email:{required:!0,email:!0},password:{required:!0,minlength:8,maxlength:30}},submitHandler:function(e){var a=r(e),e=a.find('button[type="submit"]');if(!0===e.attr("disabled"))return!1;e.attr("disabled",!0),r.ajax({url:$edumall.ajaxurl,type:"POST",cache:!1,dataType:"json",data:a.serialize(),success:function(e){e.success?(a.find(".form-response-messages").html(e.messages).addClass("success").show(),e.redirect&&location.reload()):a.find(".form-response-messages").html(e.messages).addClass("error").show()},beforeSend:function(){a.find(".form-response-messages").html("").removeClass("error success").hide(),a.find('button[type="submit"]').addClass("updating-icon")},complete:function(){a.find('button[type="submit"]').removeClass("updating-icon").attr("disabled",!1)}})}})},error:function(e,a,t){console.log(t)},beforeSend:function(){r(".edumall-popup").EdumallPopup("close"),s.addClass("open")},complete:function(){s.removeClass("open")}})}),e.on("click",".btn-pw-toggle",function(e){e.preventDefault(),e.stopPropagation();var e=r(this).parent(".form-input-password"),a=e.children("input");"password"===a.attr("type")?(a.attr("type","text"),e.addClass("show-pw")):(a.attr("type","password"),e.removeClass("show-pw"))})})}(jQuery);