{"version":3,"sources":["general.js"],"names":["$","$body","openQuickViewPopup","$popup","$button","removeClass","magnificPopup","open","mainClass","items","src","html","type","callbacks","$contentWrap","this","content","find","popupHeight","window","innerHeight","Math","min","$sliderWrap","outerHeight","perfectScrollbar","suppressScrollX","thumbsSlider","children","EdumallSwiper","mainSlider","thumbs","swiper","$form","isw","Swatches","init","wc_add_to_cart_variation_params","each","wc_variation_form","variations","data","on","isFieldSelected","needReset","globalAttrs","formValues","serializeArray","i","length","_name","name","substring","value","selectedAttributes","Object","entries","variationImageID","minMatch","currentVariation","currentAttributes","attributes","loopMatch","forEach","key","selectedKey","selectedValue","image_id","$wrapperEl","index","slideImageID","attr","parseInt","slideTo","document","ready","edumallNotices","e","preventDefault","stopPropagation","productID","parents","first","addClass","ajax","url","$edumall","ajaxurl","param","action","pid","dataType","success","results","template","append","settings","addedText","noticeAddedCartText","messages","undefined","image","title","noticeCartUrl","noticeCartText","push","growl","location","duration","message","splice","wc_add_to_cart_params","evt","product_id","$thisButton","hasClass","$variation_form","closest","val","map","endsWith","trigger","post","ajax_url","response","error","product_url","cart_redirect_after_add","cart_url","body","fragments","cart_hash","always","jQuery"],"mappings":"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","file":"../../../woo/general.min.js","sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar $body = $( 'body' );\n\n\t\t$( document ).ready( function() {\n\t\t\tinitQuickViewPopup();\n\t\t\taddToCartNotification();\n\t\t\tsingleProductAddToCart();\n\t\t} );\n\n\t\tfunction initQuickViewPopup() {\n\t\t\t$( '.edumall-product' ).on( 'click', '.quick-view-btn', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tvar $button = $( this );\n\n\t\t\t\tvar $actions = $button.parents( '.product-actions' ).first();\n\t\t\t\t$actions.addClass( 'refresh' );\n\n\t\t\t\t$button.addClass( 'loading' );\n\t\t\t\tvar productID = $button.data( 'pid' );\n\n\t\t\t\t/**\n\t\t\t\t * Avoid duplicate ajax request.\n\t\t\t\t */\n\t\t\t\tvar $popup = $body.children( '#' + 'popup-product-quick-view-content-' + productID );\n\t\t\t\tif ( $popup.length > 0 ) {\n\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t} else {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\taction: 'product_quick_view',\n\t\t\t\t\t\tpid: productID\n\t\t\t\t\t};\n\n\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\turl: $edumall.ajaxurl,\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdata: $.param( data ),\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tsuccess: function( results ) {\n\t\t\t\t\t\t\t$popup = $( results.template );\n\t\t\t\t\t\t\t$body.append( $popup );\n\t\t\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction openQuickViewPopup( $popup, $button ) {\n\t\t\t$button.removeClass( 'loading' );\n\n\t\t\t$.magnificPopup.open( {\n\t\t\t\tmainClass: 'mfp-fade popup-product-quick-view',\n\t\t\t\titems: {\n\t\t\t\t\tsrc: $popup.html(),\n\t\t\t\t\ttype: 'inline'\n\t\t\t\t},\n\t\t\t\tcallbacks: {\n\t\t\t\t\topen: function() {\n\t\t\t\t\t\tvar $contentWrap = this.content.find( '.product-container' );\n\n\t\t\t\t\t\t// Max height of popup = Window height - top bottom spacing.\n\t\t\t\t\t\tvar popupHeight = window.innerHeight - 60;\n\n\t\t\t\t\t\t// If window height large then used fixed height.\n\t\t\t\t\t\t// Popup max height = 760.\n\t\t\t\t\t\tpopupHeight = Math.min( popupHeight, 760 );\n\n\t\t\t\t\t\t$contentWrap.outerHeight( popupHeight );\n\n\t\t\t\t\t\t$contentWrap.perfectScrollbar( {\n\t\t\t\t\t\t\tsuppressScrollX: true\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tvar $sliderWrap = this.content.find( '.woo-single-gallery' );\n\t\t\t\t\t\tvar thumbsSlider = $sliderWrap.children( '.edumall-thumbs-swiper' ).EdumallSwiper();\n\t\t\t\t\t\tvar mainSlider = $sliderWrap.children( '.edumall-main-swiper' ).EdumallSwiper( {\n\t\t\t\t\t\t\tthumbs: {\n\t\t\t\t\t\t\t\tswiper: thumbsSlider\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( typeof isw != 'undefined' && typeof isw.Swatches !== 'undefined' ) {\n\t\t\t\t\t\t\tisw.Swatches.init();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Re init add to cart form variation.\n\t\t\t\t\t\tif ( typeof wc_add_to_cart_variation_params !== 'undefined' ) {\n\t\t\t\t\t\t\tthis.content.find( '.variations_form' ).each( function() {\n\t\t\t\t\t\t\t\t$( this ).wc_variation_form();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar $form = this.content.find( '.variations_form' );\n\t\t\t\t\t\tvar variations = $form.data( 'product_variations' );\n\n\t\t\t\t\t\t$form.find( 'select' ).on( 'change', function() {\n\t\t\t\t\t\t\tvar isFieldSelected = true;\n\t\t\t\t\t\t\tvar needReset = false;\n\t\t\t\t\t\t\tvar globalAttrs = {};\n\n\t\t\t\t\t\t\tvar formValues = $form.serializeArray();\n\n\t\t\t\t\t\t\t// Check all attributes selected.\n\t\t\t\t\t\t\tfor ( var i = 0; i < formValues.length; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar _name = formValues[ i ].name;\n\n\t\t\t\t\t\t\t\tif ( _name.substring( 0, 10 ) === 'attribute_' ) {\n\n\t\t\t\t\t\t\t\t\tglobalAttrs[ _name ] = formValues[ i ].value;\n\n\t\t\t\t\t\t\t\t\tif ( formValues[ i ].value === '' ) {\n\t\t\t\t\t\t\t\t\t\tisFieldSelected = false;\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( isFieldSelected === true ) {\n\t\t\t\t\t\t\t\t// Convert to array.\n\t\t\t\t\t\t\t\tvar selectedAttributes = Object.entries( globalAttrs );\n\n\t\t\t\t\t\t\t\tvar variationImageID = 0;\n\t\t\t\t\t\t\t\tvar minMatch = 0;\n\n\t\t\t\t\t\t\t\tfor ( var i = variations.length - 1; i >= 0; i -- ) {\n\t\t\t\t\t\t\t\t\tvar currentVariation = variations[ i ];\n\t\t\t\t\t\t\t\t\tvar currentAttributes = Object.entries( currentVariation.attributes ); // Convert to array.\n\t\t\t\t\t\t\t\t\tvar loopMatch = 0;\n\n\t\t\t\t\t\t\t\t\t// Compare selected variation with all variations to find best matches.\n\t\t\t\t\t\t\t\t\tcurrentAttributes.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\t\t\t\t\tselectedAttributes.forEach( ( [ selectedKey, selectedValue ] ) => {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( selectedKey === key ) {\n\t\t\t\t\t\t\t\t\t\t\t\tif ( selectedValue === value\n\t\t\t\t\t\t\t\t\t\t\t\t     || '' === value // Any Terms.\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tloopMatch ++;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tif ( minMatch < loopMatch ) {\n\t\t\t\t\t\t\t\t\t\tminMatch = loopMatch;\n\t\t\t\t\t\t\t\t\t\tvariationImageID = currentVariation.image_id;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( variationImageID ) {\n\t\t\t\t\t\t\t\t\tmainSlider.$wrapperEl.find( '.swiper-slide' ).each( function( index ) {\n\t\t\t\t\t\t\t\t\t\tvar slideImageID = $( this ).attr( 'data-image-id' );\n\t\t\t\t\t\t\t\t\t\tslideImageID = parseInt( slideImageID );\n\n\t\t\t\t\t\t\t\t\t\tif ( slideImageID === variationImageID ) {\n\t\t\t\t\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tneedReset = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tneedReset = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Reset to main image.\n\t\t\t\t\t\t\tif ( needReset ) {\n\t\t\t\t\t\t\t\tvar $mainImage = mainSlider.$wrapperEl.find( '.product-main-image' );\n\t\t\t\t\t\t\t\tvar index = $mainImage.index();\n\t\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction addToCartNotification() {\n\t\t\tvar edumallNotices = [];\n\n\t\t\t$body.on( 'click', '.ajax_add_to_cart:not(.disabled)', function() {\n\t\t\t\tvar $addedProduct = $( this ).parents( '.cart-notification' ).first();\n\t\t\t\tvar settings = $addedProduct.data( 'notification' );\n\n\t\t\t\tvar addedText = '<span class=\"added-text\">' + $edumall.noticeAddedCartText + '</span>';\n\t\t\t\tvar messages = addedText;\n\n\t\t\t\tif ( settings !== undefined ) {\n\t\t\t\t\tmessages = '<div class=\"product-added-cart\">';\n\t\t\t\t\tif ( '' !== settings.image ) {\n\t\t\t\t\t\tmessages += '<div class=\"product-thumbnail\"><img src=\"' + settings.image + '\" alt=\"' + settings.title + '\"/></div>'\n\t\t\t\t\t}\n\t\t\t\t\tmessages += '<div class=\"product-caption\"><h3 class=\"product-title\">' + settings.title + ' </h3>' + addedText + '</div>';\n\t\t\t\t\tmessages += '</div>'\n\t\t\t\t}\n\n\t\t\t\tmessages += '<div class=\"tm-button-wrapper btn-view-cart\"><a href=\"' + $edumall.noticeCartUrl + '\" class=\"tm-button button-grey style-flat tm-button-xs tm-button-full-wide\">' + $edumall.noticeCartText + '</a></div>';\n\n\t\t\t\tedumallNotices.push( messages );\n\t\t\t} );\n\n\t\t\t$body.on( 'added_to_cart', function() {\n\t\t\t\tfor ( var i = 0; i < edumallNotices.length; i ++ ) {\n\t\t\t\t\tvar messages = edumallNotices[ i ];\n\n\t\t\t\t\t$.growl( {\n\t\t\t\t\t\tlocation: 'br',\n\t\t\t\t\t\tduration: 5000,\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tmessage: messages,\n\t\t\t\t\t} );\n\n\t\t\t\t\tedumallNotices.splice( i, 1 );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction singleProductAddToCart() {\n\t\t\t// wc_add_to_cart_params is required to continue, ensure the object exists.\n\t\t\tif ( typeof wc_add_to_cart_params === 'undefined' ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Ajax add to cart.\n\t\t\t$( document ).on( 'click', '.single_add_to_cart_button', function( evt ) {\n\t\t\t\tvar $thisButton = $( this );\n\n\t\t\t\t// Do nothing if this is external product.\n\t\t\t\tif ( ! $thisButton.hasClass( 'external-add-to-cart-button' ) ) {\n\t\t\t\t\tevt.preventDefault();\n\n\t\t\t\t\tif ( $thisButton.hasClass( 'disabled' ) ) { // Variation select required.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $thisButton.hasClass( 'woosb-disabled' ) ) { // Smart Bundle select required.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar $variation_form = $( this ).closest( 'form.cart' );\n\t\t\t\t\tvar var_id = $variation_form.find( 'input[name=variation_id]' ).val();\n\t\t\t\t\tvar product_id = $variation_form.find( 'input[name=product_id]' ).val();\n\t\t\t\t\tvar quantity = $variation_form.find( 'input[name=quantity]' ).val();\n\n\t\t\t\t\tif ( 'add-to-cart' === $thisButton.attr( 'name' ) ) {\n\t\t\t\t\t\tproduct_id = $thisButton.val();\n\t\t\t\t\t}\n\n\t\t\t\t\t$thisButton.removeClass( 'added' ).addClass( 'loading updating-icon' );\n\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\taction: 'edumall_woocommerce_add_to_cart',\n\t\t\t\t\t\t'product_id': product_id\n\t\t\t\t\t};\n\n\t\t\t\t\t$variation_form.serializeArray().map( function( attr ) {\n\t\t\t\t\t\tif ( attr.name !== 'add-to-cart' ) {\n\t\t\t\t\t\t\tif ( attr.name.endsWith( '[]' ) ) {\n\t\t\t\t\t\t\t\tlet name = attr.name.substring( 0, attr.name.length - 2 );\n\t\t\t\t\t\t\t\tif ( ! (\n\t\t\t\t\t\t\t\t\tname in data\n\t\t\t\t\t\t\t\t) ) {\n\t\t\t\t\t\t\t\t\tdata[ name ] = [];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdata[ name ].push( attr.value );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdata[ attr.name ] = attr.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Trigger event.\n\t\t\t\t\t$( 'body' ).trigger( 'adding_to_cart', [ $thisButton, data ] );\n\n\t\t\t\t\t// Ajax action.\n\t\t\t\t\t$.post( wc_add_to_cart_params.ajax_url, data, function( response ) {\n\n\t\t\t\t\t\tif ( ! response ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( response.error && response.product_url ) {\n\t\t\t\t\t\t\twindow.location = response.product_url;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Redirect to cart option\n\t\t\t\t\t\tif ( wc_add_to_cart_params.cart_redirect_after_add === 'yes' ) {\n\t\t\t\t\t\t\twindow.location = wc_add_to_cart_params.cart_url;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Trigger event so themes can refresh other areas.\n\t\t\t\t\t\t$( document.body ).trigger( 'added_to_cart', [\n\t\t\t\t\t\t\tresponse.fragments,\n\t\t\t\t\t\t\tresponse.cart_hash,\n\t\t\t\t\t\t\t$thisButton\n\t\t\t\t\t\t] );\n\n\t\t\t\t\t} ).always( function() {\n\t\t\t\t\t\t$thisButton.addClass( 'added' ).removeClass( 'loading updating-icon' );\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}( jQuery )\n);\n"]}